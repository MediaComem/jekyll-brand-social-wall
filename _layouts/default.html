<!DOCTYPE html>
<html lang="fr">

  <head>
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/example.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.css" integrity="sha256-Bl4rr1AwUjcb8VvRrdHXqJvRRCyF7oHsgUl74ELjr7k=" crossorigin="anonymous" />
  </head>

  <body>
    <div class="social_wall">
        <div class='container'>

          {% social_wall

            fb_username: bbcnews,
            fb_amount: 5,

            tw_username: nytimes,
            tw_amount: 4,

          %}

        </div>
    </div>
  </body>

  <script
			  src="https://code.jquery.com/jquery-3.1.1.min.js"
			  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
			  crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/featherlight/1.7.0/featherlight.min.js" integrity="sha256-zTDNEf7J+bPdCSndhy8DppFjxfRGG5BFJW5obpl0XQs=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery.dotdotdot/1.7.4/jquery.dotdotdot.min.js" integrity="sha256-oLuM7AGPnz+4Tuqc8lWbIk7Yud+6TmHikK9QlQAXSWI=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/object-fit-images/dist/ofi.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment-with-locales.min.js"></script>

  <script>
    $(function(){

      /* SOCIAL_WALL */
      objectFitImages();
      truncate_desc('.desc');

      // Truncate quoted status and shared story
      function truncate_desc(el){
        $(el).each(function(i, obj) {
          $el = $(this);
          $wrap_story= $el.parent();
          height_available = $wrap_story.outerHeight(true)
          $ps = $wrap_story.children("*:not(.desc)");

          // measure how tall inside should be by adding together
          $ps.each(function() {
            height_available -= $(this).outerHeight(true);
          });

          $el.css('height', height_available)

          $el.dotdotdot()

        });
      }

      $( window ).resize(function() {
        truncate_desc('.desc');
      });

      // Change Time Format

      moment().format();
      // Get the language in html attribute lang=
      moment.locale($('html')[0].lang);
      // Change the date for every element time in Social_wall div
      $('.social_wall').find('time').each(function(i){
        $( this ).text(moment($( this ).html()).fromNow());
      });

    });
  </script>

</html>
